---
id: policier
title: "üîê Policier JWT Auth"
---

import SuggestionFeature from "@site/src/components/Partials/SuggestionFeature";

- [soauth](#soauth)
-   [A propos](#a-props)

# Soauth

Package d'authentification via les r√©seaux sociaux pour Bow Framework.

## √Ä propos

Ce package utilise le package [`thephpleague/oauth2-client`](https://github.com/thephpleague/oauth2-client) pour faire un wrapper.

Actuellement, il supporte le fournisseur suivant :

- Facebook
- Gitlab
- Github
- Google
- Instagram
- Linkedin

## Installation

Pour installer ce paquet, vous devez utiliser [composer](https://getcomposer.org). Nous vous recommandons de l'installer globalement.

```bash
composer require bowphp/soauth
```

### Configuration

Apr√®s l'installation Dans votre fichier `.env.json`, vous devez d√©finir les informations d'acc√®s au fournisseur comme suit:

#### Pour facebook

Vous pouvez cr√©er la nouvelle application facebook √† l‚Äôadresse [https://developers.facebook.com/fr](https://developers.facebook.com/fr).

```bash
FACEBOOK_CLIENT_ID=client_id
FACEBOOK_CLIENT_SECRET=client_secret
FACEBOOK_REDIRECT_URI=redirect_uri
```

#### Pour gitlab :

```bash
GITLAB_CLIENT_ID=client_id
GITLAB_CLIENT_SECRET=client_secret
GITLAB_REDIRECT_URI=redirect_uri
```

#### Pour github :

```bash
GITHUB_CLIENT_ID=client_id
GITHUB_CLIENT_SECRET=client_secret
GITHUB_REDIRECT_URI=redirect_uri
```

## Utilisation

Pour utiliser le package, vous devez importer la configuration du package:

```php
return [
  \Bow\Soauth\SoauthConfiguration::class,
  ...
];
```

Nous consid√©rons le contr√¥leur suivant :

```php
<?php

namespace App\Controller;

use App\Controller\Controller;
use Bow\Soauth\Soauth;

class SoauthController extends Controller
{
  /**
   * Redirection vers le fournisseur define
   * 
   * @param string $provider
   * @return mixed
   */
  public function redirect($provider)
  {
    return Soauth::redirect($provider, $scope);
  }

  /**
   * G√©rer les informations oauth
   * 
   * @param string $provider
   * @return mixed
   */
  public function handle($provider)
  {
    $user = Soauth::resource($provider);
  }
}
```

### Ajouter un itin√©raire

D√©finissez la route qui utilisera pour les actions d‚Äôappel soauth:

```php
$app->get('/oauth/:provider/redirect', 'SoauthController::redirect');
$app->get('/oauth/:provider/callback', 'SoauthController::handle');
```

<SuggestionFeature />
