---
id: csrf
title: "ğŸ™…ğŸ½â€â™‚ï¸ CSRF Protection"
---

import SuggestionFeature from "@site/src/components/Partials/SuggestionFeature";

## Introduction

La protection contre les attaques CSRF (*Cross-Site Request Forgery*) est essentielle pour sÃ©curiser vos applications web. Bow Framework fournit des outils simples et efficaces pour prÃ©venir ces attaques en gÃ©nÃ©rant et en validant automatiquement des jetons CSRF.

Une attaque CSRF consiste Ã  tromper un utilisateur authentifiÃ© pour qu'il exÃ©cute une action non autorisÃ©e sur une application. Pour prÃ©venir cela, Bow gÃ©nÃ¨re un **jeton CSRF unique** pour chaque session utilisateur active. Ce jeton est utilisÃ© pour valider toutes les requÃªtes envoyÃ©es Ã  l'application.

## Protection CSRF

Pour protÃ©ger vos formulaires, incluez un champ cachÃ© contenant le jeton CSRF :

```html
<form method="POST" action="/upload">
  {{{ csrf_field() }}}
  ...
</form>
```

Le middleware `Bow\Middleware\CsrfMiddleware::class`, inclus dans le groupe de middleware Web par dÃ©faut, vÃ©rifie automatiquement que le jeton fourni correspond Ã  celui stockÃ© dans la session.

Vous pouvez activer ou dÃ©sactivÃ© la vÃ©rification automatique dans le fichier `config/app.php`, avec la clÃ© `auto_csrf`, qui prend `true` ou `false`.

```php
return [
  ...
  "auto_csrf" => true
  ...
];
```

## IntÃ©gration avec JavaScript

Lors de la crÃ©ation d'applications utilisant AJAX ou des bibliothÃ¨ques JavaScript comme Axios ou jQuery, il est recommandÃ© de configurer votre bibliothÃ¨que HTTP pour inclure automatiquement le jeton CSRF dans les en-tÃªtes des requÃªtes.

Ajoutez le jeton CSRF Ã  une balise META HTML :

```html
<meta name="csrf-token" content="{{ csrf_token() }}">
```

Ensuite, configurez votre bibliothÃ¨que pour inclure cet en-tÃªte dans chaque requÃªte :

### Exemple avec jQuery

```js
$.ajaxSetup({
  headers: {
    'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
  }
});
```

### Exemple avec Axios

```js
import axios from 'axios';

axios.defaults.headers.common['X-CSRF-TOKEN'] = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
```

## Gestion des jetons CSRF

### Jetons dans les en-tÃªtes HTTP

Outre les champs de formulaire, Bow permet d'utiliser l'en-tÃªte `X-CSRF-TOKEN` pour valider les requÃªtes. Cela est particuliÃ¨rement utile pour les requÃªtes AJAX.

### Jetons dans les cookies

Bow gÃ©nÃ¨re Ã©galement un cookie nommÃ© `XSRF-TOKEN` contenant le jeton CSRF actuel. Ce cookie peut Ãªtre utilisÃ© pour configurer automatiquement l'en-tÃªte `X-XSRF-TOKEN`.

Par exemple, des frameworks comme Angular et Axios utilisent ce cookie pour sÃ©curiser les requÃªtes sans configuration supplÃ©mentaire.

Avec Bow Framework, la mise en Å“uvre de la protection CSRF devient simple et efficace, vous permettant de vous concentrer sur le dÃ©veloppement de fonctionnalitÃ©s tout en assurant la sÃ©curitÃ© de vos utilisateurs.

<SuggestionFeature />
