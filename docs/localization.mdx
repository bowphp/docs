---
id: i18n
title: "ðŸŽŽ i18n"
---

import SuggestionFeature from "@site/src/components/Partials/SuggestionFeature";

## Introduction

Dans toute application, il y a le besoin de rendre l'application multilingue. Bow implÃ©mente un systÃ¨me simple de traduction.

[![asciicast](https://asciinema.org/a/zxbid2giZdnaJjOhOkALKBC8G.svg)](https://asciinema.org/a/zxbid2giZdnaJjOhOkALKBC8G)

## Configuration

Pour utiliser le systÃ¨me de traduction, il faut d'abord considÃ©rer la configuration qui se trouve dans le fichier `config/trans.php`. Dans ce fichier, la langue par dÃ©faut est le franÃ§ais, donc `'lang' => 'fr'`.

Dans le dossier `lang` sont rangÃ©es les traductions de votre application. Ce sont des fichiers `php` qui retournent un `array`. Si vous remarquez, il y a un dossier `fr` et `en`. Ce sont les dossiers pour chaque langue : `fr` pour le franÃ§ais et `en` pour l'anglais. S'il y avait une autre langue, par exemple l'espagnol, ce serait `es` le nom du dossier.

```txt
/lang
  /en
    messages.php
  /fr
    messages.php
```

:::info Structure des fichiers
Tous les fichiers de langue renvoient un tableau de chaÃ®nes Ã  clÃ©. Chaque clÃ© reprÃ©sente une traduction spÃ©cifique.
:::

Par exemple :

```php title="lang/en/messages.php"
return [
  'welcome' => 'Welcome to our application'
];
```

## Configuration de la locale

La langue par dÃ©faut de votre application est stockÃ©e dans le fichier de configuration `config/trans.php`. Bien entendu, vous pouvez modifier cette valeur pour rÃ©pondre aux besoins de votre application.

Vous pouvez Ã©galement modifier la langue active au moment de l'exÃ©cution Ã  l'aide de la mÃ©thode `setLocale` sur la classe [`Bow\Translate\Translator`](https://bowphp.com/api/master/Bow/Translate/Translator.html) :

```php title="routes/app.php"

use Bow\Translate\Translator;

$router->get('docs/:locale', function ($locale) {
  Translator::setLocale($locale);
  //
});
```

### Langue de secours

Vous pouvez configurer une langue de secours qui sera utilisÃ©e lorsque la langue active ne contient pas une chaÃ®ne de traduction donnÃ©e. Comme la langue par dÃ©faut, la langue de secours est Ã©galement configurÃ©e dans le fichier de configuration `config/trans.php` :

```php title="config/trans.php"
'lang' => 'en',
```

## RÃ©cupÃ©ration de chaÃ®nes de traduction

Vous pouvez extraire des lignes de fichiers de langue Ã  l'aide de la fonction helper `trans` ou `t`. La mÃ©thode `t` accepte le fichier et la clÃ© de la chaÃ®ne de traduction comme premier argument. Par exemple, rÃ©cupÃ©rons la chaÃ®ne de traduction de bienvenue dans le fichier de langue `lang/messages.php` :

```php
echo t('messages.welcome');

// Ou bien
echo trans('messages.welcome');

// Ou bien
use Bow\Translate\Translator;

echo Translator::translate('messages.welcome');
```

### DÃ©termination de la locale actuelle

Vous pouvez utiliser les mÃ©thodes `getLocale` et `isLocale` sur la classe `Translator` ou par le helper `trans` pour dÃ©terminer les paramÃ¨tres rÃ©gionaux actuels ou vÃ©rifier si les paramÃ¨tres rÃ©gionaux correspondent Ã  une valeur donnÃ©e:

```php
use Bow\Translate\Translator;

$locale = Translator::getLocale();

if (Translator::isLocale('en')) {
 //
}
```

Via le helper `trans`

```php
$locale = trans()->getLocale();

if (trans()->isLocale('en')) {
 //
}
```

:::tip Traductions manquantes
Si la chaÃ®ne de traduction spÃ©cifiÃ©e n'existe pas, la fonction `t` renverra la clÃ© de la chaÃ®ne de traduction. Ainsi, Ã  l'aide de l'exemple ci-dessus, la fonction `t` renverrait `messages.welcome` si la chaÃ®ne de traduction n'existe pas.
:::

### Remplacement de paramÃ¨tres dans les chaÃ®nes de traduction

Si vous le souhaitez, vous pouvez dÃ©finir des espaces rÃ©servÃ©s dans vos chaÃ®nes de traduction. Tous les espaces rÃ©servÃ©s sont encadrÃ©s par `{}`. Par exemple, vous pouvez dÃ©finir un message de bienvenue avec un nom d'espace rÃ©servÃ©:

```php
'welcome' => 'Welcome, {name}',
```

Pour remplacer les espaces rÃ©servÃ©s lors de l'extraction d'une chaÃ®ne de traduction, transmettez un tableau de remplacements en tant que deuxiÃ¨me argument de la fonction `t` ou `trans`:

```php
echo t('messages.welcome', ['name' => 'Galy']);
```

## La pluralisation

La pluralisation est un problÃ¨me complexe, car diffÃ©rentes langues ont une variÃ©tÃ© de rÃ¨gles complexes pour la pluralisation. En utilisant un caractÃ¨re "pipe" (`|`), vous pouvez distinguer les formes singuliÃ¨re et plurielle d'une chaÃ®ne :

```php
"names" => "C'est un utilisateur|Ce sont des utilisateurs",
```

AprÃ¨s avoir dÃ©fini une chaÃ®ne de traduction comportant des options de pluralisation, vous pouvez utiliser la fonction `t` ou `trans`. Dans cet exemple, puisque le nombre est supÃ©rieur Ã  un, la forme au pluriel de la chaÃ®ne de traduction est renvoyÃ©e:

```php
echo t("messages.names", count($names) > 1);
```

### Pluralisation avec remplacement

Avec les donnÃ©es remplacÃ©es :

```php
"names" => "Bonjour {name}|Bonjour Ã  tous",
```

```php
echo t("messages.names", ["name" => "Newt"], count($names) == 1);
// => Bonjour Mewt
```

<SuggestionFeature />
