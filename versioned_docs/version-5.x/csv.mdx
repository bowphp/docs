---
id: csv
title: üß© CSV Export/Import
---

import SuggestionFeature from "@site/src/components/Partials/SuggestionFeature";

## Introduction

Le module `bowphp/csv` permet d'exporter ou d'importer facilement des mod√®les (type Eloquent) au format CSV en s'appuyant sur [league/csv](https://csv.thephpleague.com/).

## Installation

```bash
composer require bowphp/csv
```

## Exporter un mod√®le en CSV

Ajoutez le trait `Bow\Csv\Csv` √† votre mod√®le :

```php title="app/Models/User.php"
use Bow\Csv\Csv;
use Bow\Database\Barry\Model;

class User extends Model
{
  use Csv;
}
```

### Export basique

```php
$user = new User();
$csv = $user->toCsv(); // Retourne une cha√Æne CSV
```

### Export avec des colonnes sp√©cifiques

```php
$user = new User();
$user->setCsvHeaders(['id', 'name']);

$csv = $user->toCsv(); // N'inclura que id et name
```

### Export vers un fichier

```php
$user = new User();
$user->toCsv('users.csv'); // T√©l√©charge users.csv
```

## Importer un CSV dans un mod√®le

```php
use Bow\Csv\CsvService;

$service = new CsvService();
$service->import(new User(), '/chemin/vers/fichier.csv', ['id', 'name', 'email']);
```

### Importer directement via le mod√®le (`importCsv`)

```php
$user = new User();
$user->setCsvHeaders(['id', 'name', 'email']);

// Importe chaque ligne du fichier CSV dans le mod√®le User
$user->importCsv('/chemin/vers/fichier.csv');
```

## Helpers globaux

Deux fonctions sont expos√©es si vous pr√©f√©rez un appel fonctionnel :

```php
app_export_model_to_csv(new User(), null, ['id', 'name']);
app_import_csv_to_model(new User(), '/chemin/vers/fichier.csv', ['id', 'name', 'email']);
```

## Bonnes pratiques

- D√©finissez les headers via `setCsvHeaders()` pour contr√¥ler l'ordre et la liste des colonnes.
- V√©rifiez/validez les donn√©es entrantes avant `import()` (formats, valeurs attendues).
- Les mod√®les doivent exposer `toArray()` de mani√®re coh√©rente pour que les lignes soient correctement s√©rialis√©es.

<SuggestionFeature />
