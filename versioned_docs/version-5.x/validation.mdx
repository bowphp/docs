---
id: validation
title: "ğŸ›¡ï¸ Validation"
---

import SuggestionFeature from "@site/src/components/Partials/SuggestionFeature";

# Validation des donnÃ©es

## Introduction

La validation des donnÃ©es est une partie cruciale de toute application web. BowPHP fournit un systÃ¨me de validation simple, Ã©lÃ©gant et puissant qui vous permet de valider facilement vos donnÃ©es entrantes.

## Utilisation de base

La faÃ§on la plus simple d'utiliser le validateur est via la fonction helper `validator()`. Voici un exemple simple:

```php
$data = [
  "name" => "John Doe",
  "email" => "john@example.com",
  "age" => 25
];

$validation = validator($data, [
  "name" => "required|min:3|max:50",
  "email" => "required|email",
  "age" => "required|int"
]);

if ($validation->fails()) {
  // La validation a Ã©chouÃ©
  $errors = $validation->getMessages();
  // GÃ©rer les erreurs
}
```

## RÃ¨gles de validation disponibles

### RÃ¨gles de base

| RÃ¨gle | Description |
|-------|-------------|
| `required` | Le champ est obligatoire |
| `required_if:field1,field2` | Le champ est obligatoire si les champs spÃ©cifiÃ©s existent |
| `email` | Le champ doit Ãªtre une adresse email valide |
| `min:value` | La longueur minimale du champ |
| `max:value` | La longueur maximale du champ |
| `size:value` | La longueur exacte du champ |
| `same:value` | Le champ doit Ãªtre identique Ã  la valeur spÃ©cifiÃ©e |

### RÃ¨gles de type

| RÃ¨gle | Description |
|-------|-------------|
| `alpha` | Uniquement des caractÃ¨res alphabÃ©tiques |
| `alphanum` | Uniquement des caractÃ¨res alphanumÃ©riques |
| `number` | Le champ doit Ãªtre un nombre |
| `int` | Le champ doit Ãªtre un entier |
| `float` | Le champ doit Ãªtre un nombre dÃ©cimal |

### RÃ¨gles de format

| RÃ¨gle | Description |
|-------|-------------|
| `date` | Format de date (YYYY-MM-DD) |
| `datetime` | Format datetime (YYYY-MM-DD HH:MM:SS) |
| `regex:pattern` | Le champ doit correspondre au pattern regex |
| `lower` | Uniquement des lettres minuscules |
| `upper` | Uniquement des lettres majuscules |

### RÃ¨gles de base de donnÃ©es

| RÃ¨gle | Description |
|-------|-------------|
| `unique:table,column` | La valeur doit Ãªtre unique dans la table |
| `exists:table,column` | La valeur doit exister dans la table |
| `!exists:table,column` | La valeur ne doit pas exister dans la table |

## Messages d'erreur personnalisÃ©s

Vous pouvez personnaliser les messages d'erreur en passant un tableau de messages comme troisiÃ¨me argument:

```php
$validation = validator($data, [
  "name" => "required|min:3",
  "email" => "required|email"
], [
  "name" => [
    "required" => "Le nom est obligatoire",
    "min" => "Le nom doit contenir au moins 3 caractÃ¨res"
  ],
  "email" => [
    "required" => "L'email est obligatoire",
    "email" => "L'email n'est pas valide"
  ]
]);
```

## RÃ©cupÃ©ration des erreurs

Le validateur fournit plusieurs mÃ©thodes pour rÃ©cupÃ©rer les informations sur les erreurs:

```php
// VÃ©rifie si la validation a Ã©chouÃ©
$validation->fails(); // bool

// RÃ©cupÃ¨re tous les messages d'erreur
$validation->getMessages(); // array

// RÃ©cupÃ¨re le dernier message d'erreur
$validation->getLastMessage(); // string

// RÃ©cupÃ¨re les champs qui ont Ã©chouÃ©
$validation->getCorruptedFields(); // array

// RÃ©cupÃ¨re les rÃ¨gles qui ont Ã©chouÃ©
$validation->getFailsRules(); // array
```

## Validation et exceptions

Vous pouvez lancer une exception de validation avec la mÃ©thode `throwError()`:

```php
$validation = validator($data, $rules);

if ($validation->fails()) {
  $validation->throwError(); // Lance ValidationException
}
```

L'exception contiendra les messages d'erreur et dÃ©finira automatiquement le code de statut HTTP Ã  400.

## Validation dans les contrÃ´leurs

Voici un exemple pratique d'utilisation du validateur dans un contrÃ´leur:

```php
class UserController
{
  public function store()
  {
    $validation = validator(request()->all(), [
      "name" => "required|min:3|max:50",
      "email" => "required|email|unique:users,email",
      "password" => "required|min:6"
    ]);

    if ($validation->fails()) {
      return response()->json([
        "errors" => $validation->getMessages()
      ], 400);
    }

    // CrÃ©er l'utilisateur
    User::create(request()->all());

    return response()->json([
      "message" => "Utilisateur crÃ©Ã© avec succÃ¨s"
    ]);
  }
}
```

## Bonnes pratiques

1. **Validation prÃ©coce**: Validez les donnÃ©es le plus tÃ´t possible dans le cycle de vie de la requÃªte.
2. **Messages clairs**: Utilisez des messages d'erreur descriptifs et comprÃ©hensibles.
3. **RÃ¨gles composÃ©es**: Combinez plusieurs rÃ¨gles pour une validation robuste.
4. **SÃ©curitÃ©**: Utilisez toujours la validation cÃ´tÃ© serveur, mÃªme si vous avez une validation cÃ´tÃ© client.

<SuggestionFeature />
