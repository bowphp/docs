---
id: csrf
title: "üôÖüèΩ‚Äç‚ôÇÔ∏è CSRF Protection"
---

import SuggestionFeature from "@site/src/components/Partials/SuggestionFeature";

## Introduction

La protection contre les attaques CSRF (*Cross-Site Request Forgery*) est essentielle pour s√©curiser vos applications web. Bow Framework fournit des outils simples et efficaces pour pr√©venir ces attaques en g√©n√©rant et en validant automatiquement des jetons CSRF.

:::info Qu'est-ce qu'une attaque CSRF ?
Une attaque CSRF consiste √† tromper un utilisateur authentifi√© pour qu'il ex√©cute une action non autoris√©e sur une application. Pour pr√©venir cela, Bow g√©n√®re un **jeton CSRF unique** pour chaque session utilisateur active. Ce jeton est utilis√© pour valider toutes les requ√™tes envoy√©es √† l'application.
:::

## Protection CSRF

Pour prot√©ger vos formulaires, incluez un champ cach√© contenant le jeton CSRF :

```html
<form method="POST" action="/upload">
  {{{ csrf_field() }}}
  ...
</form>
```

Le middleware `Bow\Middleware\CsrfMiddleware::class`, inclus dans le groupe de middleware web par d√©faut, v√©rifie automatiquement que le jeton fourni correspond √† celui stock√© dans la session.

### Configuration

Vous pouvez activer ou d√©sactiver la v√©rification automatique dans le fichier `config/app.php`, avec la cl√© `auto_csrf` :

```php
return [
  ...
  "auto_csrf" => true,
  ...
];
```

:::tip
La v√©rification CSRF est activ√©e par d√©faut (`true`). Il est recommand√© de ne jamais la d√©sactiver en production.
:::

## Int√©gration avec JavaScript

Lors de la cr√©ation d'applications utilisant AJAX ou des biblioth√®ques JavaScript comme Axios ou jQuery, il est recommand√© de configurer votre biblioth√®que HTTP pour inclure automatiquement le jeton CSRF dans les en-t√™tes des requ√™tes.

### √âtape 1 : Ajouter le jeton CSRF dans une balise META

Ajoutez le jeton CSRF √† une balise META HTML :

```html
<meta name="csrf-token" content="{{ csrf_token() }}">
```

### √âtape 2 : Configurer votre biblioth√®que JavaScript

Ensuite, configurez votre biblioth√®que pour inclure cet en-t√™te dans chaque requ√™te :

#### Exemple avec jQuery

```js
$.ajaxSetup({
  headers: {
    'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
  }
});
```

#### Exemple avec Axios

```js
import axios from 'axios';

axios.defaults.headers.common['X-CSRF-TOKEN'] = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
```

## Gestion des jetons CSRF

### Jetons dans les en-t√™tes HTTP

Outre les champs de formulaire, Bow permet d'utiliser l'en-t√™te `X-CSRF-TOKEN` pour valider les requ√™tes. Cela est particuli√®rement utile pour les requ√™tes AJAX.

### Jetons dans les cookies

Bow g√©n√®re √©galement un cookie nomm√© `XSRF-TOKEN` contenant le jeton CSRF actuel. Ce cookie peut √™tre utilis√© pour configurer automatiquement l'en-t√™te `X-XSRF-TOKEN`.

Par exemple, des frameworks comme Angular et Axios utilisent ce cookie pour s√©curiser les requ√™tes sans configuration suppl√©mentaire.

## Conclusion

Avec Bow Framework, la mise en ≈ìuvre de la protection CSRF devient simple et efficace, vous permettant de vous concentrer sur le d√©veloppement de fonctionnalit√©s tout en assurant la s√©curit√© de vos utilisateurs.

:::tip Bonnes pratiques
- Toujours activer la protection CSRF en production
- Utiliser `csrf_field()` dans tous vos formulaires POST/PUT/DELETE
- Configurer correctement les en-t√™tes CSRF pour les requ√™tes AJAX
- Ne jamais d√©sactiver la v√©rification CSRF sauf pour des endpoints API sp√©cifiques et s√©curis√©s autrement
:::

<SuggestionFeature />
